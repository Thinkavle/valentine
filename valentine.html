<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>üíï Valentine's DM</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f;
  --phone-bg: #000;
  --bubble-them: #262630;
  --bubble-you: #0b93f6;
  --text: #f0f0f5;
  --text-dim: #6e6e80;
  --pink: #ff2d78;
  --pink-glow: rgba(128, 96, 107, 0.3);
  --crack-opacity: 0;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg);
  font-family: 'DM Sans', -apple-system, sans-serif;
  overflow: hidden;
  perspective: 1200px;
}

/* Ambient background */
.ambient {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}
.ambient::before {
  content: '';
  position: absolute;
  width: 600px; height: 600px;
  background: radial-gradient(circle, var(--pink-glow), transparent 70%);
  top: -200px; left: -100px;
  animation: ambientFloat 12s ease-in-out infinite;
}
.ambient::after {
  content: '';
  position: absolute;
  width: 500px; height: 500px;
  background: radial-gradient(circle, rgba(99, 50, 255, 0.15), transparent 70%);
  bottom: -200px; right: -100px;
  animation: ambientFloat 15s ease-in-out infinite reverse;
}
@keyframes ambientFloat {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(80px, 40px); }
}

/* Phone frame */
.phone {
  position: relative;
  z-index: 10;
  width: 375px;
  max-width: 95vw;
  height: 720px;
  max-height: 90vh;
  background: var(--phone-bg);
  border-radius: 44px;
  border: 3px solid #2a2a35;
  overflow: hidden;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05),
    0 25px 80px rgba(0,0,0,0.7),
    0 0 120px var(--pink-glow);
  display: flex;
  flex-direction: column;
  transition: transform 0.5s, filter 0.5s, box-shadow 0.5s;
}

/* Screen crack overlay */
.crack-overlay {
  position: absolute;
  inset: 0;
  z-index: 100;
  pointer-events: none;
  opacity: var(--crack-opacity);
  transition: opacity 0.3s;
  background:
    linear-gradient(137deg, transparent 30%, rgba(255,255,255,0.08) 30.5%, transparent 31%),
    linear-gradient(215deg, transparent 45%, rgba(255,255,255,0.06) 45.5%, transparent 46%),
    linear-gradient(170deg, transparent 20%, rgba(255,255,255,0.05) 20.3%, transparent 20.6%),
    linear-gradient(95deg, transparent 60%, rgba(255,255,255,0.07) 60.3%, transparent 60.6%),
    linear-gradient(250deg, transparent 35%, rgba(255,255,255,0.04) 35.2%, transparent 35.5%),
    linear-gradient(310deg, transparent 55%, rgba(255,255,255,0.06) 55.2%, transparent 55.5%),
    linear-gradient(185deg, transparent 15%, rgba(255,255,255,0.05) 15.2%, transparent 15.5%);
}

/* Status bar */
.status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 24px 6px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
}
.status-bar .time { font-size: 15px; font-weight: 700; }

/* Chat header */
.chat-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.avatar {
  width: 40px; height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff2d78, #ff6b9d);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}
.header-info { flex: 1; }
.header-name { font-weight: 700; font-size: 16px; color: var(--text); }
.header-status { font-size: 12px; color: #4cd964; font-weight: 500; }

/* Messages area */
.messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  scroll-behavior: smooth;
}
.messages::-webkit-scrollbar { width: 0; }

.msg {
  max-width: 78%;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 15px;
  line-height: 1.4;
  animation: msgPop 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) both;
  position: relative;
  word-wrap: break-word;
}
@keyframes msgPop {
  from { transform: scale(0.7) translateY(10px); opacity: 0; }
  to { transform: scale(1) translateY(0); opacity: 1; }
}

.msg.them {
  align-self: flex-start;
  background: var(--bubble-them);
  color: var(--text);
  border-bottom-left-radius: 6px;
}
.msg.you {
  align-self: flex-end;
  background: var(--bubble-you);
  color: white;
  border-bottom-right-radius: 6px;
}
.msg.you.unsent {
  text-decoration: line-through;
  opacity: 0.4;
  background: #444;
}
.msg.system {
  align-self: center;
  background: none;
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 500;
  padding: 8px 0;
  max-width: 100%;
  text-align: center;
}
.msg.reaction {
  font-size: 40px;
  background: none;
  padding: 4px;
  line-height: 1;
}
.msg.them.reaction { align-self: flex-start; }

/* Read receipt */
.read-receipt {
  align-self: flex-end;
  font-size: 11px;
  color: var(--text-dim);
  padding: 2px 4px;
  font-weight: 500;
}
.read-receipt.guilt { color: var(--pink); font-weight: 700; }

/* Typing indicator */
.typing {
  align-self: flex-start;
  display: none;
  gap: 4px;
  padding: 14px 18px;
  background: var(--bubble-them);
  border-radius: 20px;
  border-bottom-left-radius: 6px;
}
.typing.show { display: flex; }
.typing span {
  width: 8px; height: 8px;
  background: #666;
  border-radius: 50%;
  animation: typingBounce 1.4s infinite;
}
.typing span:nth-child(2) { animation-delay: 0.2s; }
.typing span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-6px); }
}
.typing.frantic span { animation-duration: 0.3s; background: var(--pink); }

/* Input area */
.input-area {
  padding: 10px 12px 34px;
  display: flex;
  gap: 8px;
  align-items: center;
  border-top: 1px solid rgba(255,255,255,0.06);
  background: rgba(0,0,0,0.3);
}

.btn {
  padding: 12px 22px;
  border: none;
  border-radius: 50px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  flex: 1;
  position: relative;
  overflow: hidden;
}
.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent, rgba(255,255,255,0.1));
  opacity: 0;
  transition: opacity 0.2s;
}
.btn:hover::after { opacity: 1; }

.btn-yes {
  background: linear-gradient(135deg, #ff2d78, #ff6b9d);
  color: white;
  box-shadow: 0 4px 20px rgba(255, 45, 120, 0.4);
}
.btn-yes:hover { transform: scale(1.05); box-shadow: 0 6px 30px rgba(255, 45, 120, 0.6); }

.btn-no {
  background: #1c1c28;
  color: #888;
  border: 1px solid #2a2a35;
}
.btn-no:hover { background: #252535; }

.btn-no.shaking { animation: btnShake 0.3s ease; }
@keyframes btnShake {
  0%,100%{ transform: translateX(0); }
  25%{ transform: translateX(-6px); }
  75%{ transform: translateX(6px); }
}

.btn-no.shrinking {
  transition: all 0.3s ease;
}

/* Notification popup */
.notification {
  position: absolute;
  top: 50px;
  left: 50%;
  transform: translateX(-50%) translateY(-120%);
  background: rgba(30, 30, 45, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 16px;
  padding: 14px 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  z-index: 90;
  min-width: 280px;
  max-width: 340px;
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 10px 40px rgba(0,0,0,0.5);
}
.notification.show {
  transform: translateX(-50%) translateY(0);
}
.notif-icon {
  width: 36px; height: 36px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  flex-shrink: 0;
}
.notif-text { flex: 1; }
.notif-app { font-size: 11px; color: var(--text-dim); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.notif-msg { font-size: 13px; color: var(--text); font-weight: 500; margin-top: 2px; }

/* Fullscreen overlays */
.overlay {
  position: absolute;
  inset: 0;
  z-index: 80;
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  text-align: center;
  padding: 40px;
  gap: 16px;
}
.overlay.show { display: flex; }

.call-overlay {
  background: linear-gradient(180deg, #1a0a15, #0a0a0f);
}
.call-avatar {
  width: 100px; height: 100px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff2d78, #ff6b9d);
  display: flex; align-items: center; justify-content: center;
  font-size: 50px;
  animation: callPulse 2s ease-in-out infinite;
  box-shadow: 0 0 60px var(--pink-glow);
}
@keyframes callPulse {
  0%,100% { box-shadow: 0 0 30px var(--pink-glow); transform: scale(1); }
  50% { box-shadow: 0 0 80px rgba(255,45,120,0.5); transform: scale(1.05); }
}
.call-label { font-size: 13px; color: var(--text-dim); font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }
.call-name { font-size: 28px; color: var(--text); font-weight: 700; font-family: 'DM Sans'; }
.call-status { font-size: 15px; color: var(--pink); font-weight: 500; }

.call-btns { display: flex; gap: 40px; margin-top: 30px; }
.call-btn {
  width: 64px; height: 64px;
  border-radius: 50%;
  border: none;
  font-size: 28px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.call-btn:hover { transform: scale(1.1); }
.call-decline { background: #ff3b30; box-shadow: 0 4px 20px rgba(255,59,48,0.4); }
.call-accept { background: #34c759; box-shadow: 0 4px 20px rgba(52,199,89,0.4); }

/* Final YES overlay */
.yes-overlay {
  background: radial-gradient(circle at center, #1a0520, #0a0a0f);
}
.yes-overlay .big-emoji {
  font-size: 80px;
  animation: heartBeat 0.8s ease-in-out infinite alternate;
}
@keyframes heartBeat { from{transform:scale(1)} to{transform:scale(1.2)} }
.yes-overlay h2 {
  font-family: 'Caveat', cursive;
  font-size: 42px;
  color: var(--pink);
  margin-top: 8px;
}
.yes-overlay p {
  color: var(--text-dim);
  font-size: 16px;
  font-weight: 500;
}

/* Confetti */
.confetti-piece {
  position: absolute;
  pointer-events: none;
  z-index: 110;
  animation: confettiDrop 3s ease-out forwards;
}
@keyframes confettiDrop {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(800px) rotate(720deg); opacity: 0; }
}

/* Glitch effect */
.glitch .messages { animation: glitchScreen 0.15s infinite; }
@keyframes glitchScreen {
  0% { transform: translate(0); filter: none; }
  20% { transform: translate(-2px, 1px); filter: hue-rotate(90deg); }
  40% { transform: translate(2px, -1px); }
  60% { transform: translate(-1px, -2px); filter: hue-rotate(-90deg); }
  80% { transform: translate(1px, 2px); }
  100% { transform: translate(0); filter: none; }
}

/* Screen tilt */
.phone.tilt-left { transform: rotate(-3deg); }
.phone.tilt-right { transform: rotate(3deg); }
.phone.shake-hard { animation: phoneShake 0.4s ease; }
@keyframes phoneShake {
  0%,100%{transform:translate(0) rotate(0)}
  10%{transform:translate(-10px,-5px) rotate(-3deg)}
  30%{transform:translate(8px,4px) rotate(2deg)}
  50%{transform:translate(-6px,2px) rotate(-1deg)}
  70%{transform:translate(4px,-3px) rotate(1deg)}
  90%{transform:translate(-2px,1px) rotate(0)}
}

/* Dark mode inversion for drama */
.phone.invert { filter: invert(1) hue-rotate(180deg); }
</style>
</head>
<body>

<div class="ambient"></div>

<div class="phone" id="phone">
  <div class="crack-overlay" id="crackOverlay"></div>

  <!-- Notification popup -->
  <div class="notification" id="notification">
    <div class="notif-icon" id="notifIcon">üíï</div>
    <div class="notif-text">
      <div class="notif-app" id="notifApp">Messages</div>
      <div class="notif-msg" id="notifMsg">You have a new message</div>
    </div>
  </div>

  <!-- Status bar -->
  <div class="status-bar">
    <span class="time" id="clock">9:41</span>
    <span>üíï Valentine&apos;s Day</span>
    <span id="battery">‚ù§Ô∏è 100%</span>
  </div>

  <!-- Chat header -->
  <div class="chat-header">
    <div class="avatar">üíò</div>
    <div class="header-info">
      <div class="header-name" id="headerName">Your Valentine üíï</div>
      <div class="header-status" id="headerStatus">‚óè online</div>
    </div>
  </div>

  <!-- Messages -->
  <div class="messages" id="messages">
    <!-- Messages will be added dynamically -->
  </div>

  <!-- Typing indicator -->
  <div class="typing" id="typing">
    <span></span><span></span><span></span>
  </div>

  <!-- Input area -->
  <div class="input-area" id="inputArea">
    <button class="btn btn-yes" id="btnYes" onclick="sayYes()">Yes üíï</button>
    <button class="btn btn-no" id="btnNo" onclick="clickNo()">No</button>
  </div>

  <!-- Call overlay -->
  <div class="overlay call-overlay" id="callOverlay">
    <div class="call-label">incoming call</div>
    <div class="call-avatar">üë©</div>
    <div class="call-name" id="callName">Mom üì±</div>
    <div class="call-status" id="callStatus">Someone told her you said no...</div>
    <div class="call-btns">
      <button class="call-btn call-decline" onclick="declineCall()">üìµ</button>
      <button class="call-btn call-accept" onclick="acceptCall()">üìû</button>
    </div>
  </div>

  <!-- YES overlay -->
  <div class="overlay yes-overlay" id="yesOverlay">
    <div class="big-emoji">üíñ</div>
    <h2 id="yesTitle">It's a date!</h2>
    <p id="yesSubtitle">Happy Valentine's Day ü•∞</p>
  </div>
</div>

<script>
const phone = document.getElementById('phone');
const messagesEl = document.getElementById('messages');
const typingEl = document.getElementById('typing');
const btnNo = document.getElementById('btnNo');
const btnYes = document.getElementById('btnYes');
const notification = document.getElementById('notification');
const notifIcon = document.getElementById('notifIcon');
const notifApp = document.getElementById('notifApp');
const notifMsg = document.getElementById('notifMsg');
const headerStatus = document.getElementById('headerStatus');
const headerName = document.getElementById('headerName');
const battery = document.getElementById('battery');

let attempts = 0;
let noScale = 1;
let yesScale = 1;
let locked = false;

// Update clock
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false });
}
updateClock();
setInterval(updateClock, 30000);

// Initial messages
function init() {
  addMessage('them', 'hey... üëâüëà');
  setTimeout(() => addMessage('them', 'so valentine\'s day is coming up'), 600);
  setTimeout(() => addMessage('them', 'will you be my valentine? ü•∫üíï'), 1400);
  setTimeout(() => addReadReceipt('Delivered'), 1800);
}

function addMessage(type, text, extraClass = '') {
  const div = document.createElement('div');
  div.className = `msg ${type} ${extraClass}`;
  div.textContent = text;
  messagesEl.appendChild(div);
  scrollToBottom();
  return div;
}

function addReadReceipt(text, isGuilt = false) {
  const div = document.createElement('div');
  div.className = `read-receipt ${isGuilt ? 'guilt' : ''}`;
  div.textContent = text;
  messagesEl.appendChild(div);
  scrollToBottom();
}

function scrollToBottom() {
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function showTyping(frantic = false) {
  typingEl.classList.add('show');
  if (frantic) typingEl.classList.add('frantic');
  else typingEl.classList.remove('frantic');
  scrollToBottom();
}

function hideTyping() {
  typingEl.classList.remove('show', 'frantic');
}

function showNotification(icon, app, msg, duration = 3000) {
  notifIcon.textContent = icon;
  notifApp.textContent = app;
  notifMsg.textContent = msg;
  notification.classList.add('show');
  setTimeout(() => notification.classList.remove('show'), duration);
}

function showCall(name, status) {
  document.getElementById('callName').textContent = name;
  document.getElementById('callStatus').textContent = status;
  document.getElementById('callOverlay').classList.add('show');
}

function declineCall() {
  document.getElementById('callOverlay').classList.remove('show');
  setTimeout(() => {
    addMessage('system', 'üìµ Call declined');
    addMessage('them', 'you can\'t run from love OR your mom');
  }, 500);
}

function acceptCall() {
  document.getElementById('callOverlay').classList.remove('show');
  setTimeout(() => {
    addMessage('system', 'üìû Call connected for 0:03');
    setTimeout(() => addMessage('them', 'she says you better say yes'), 800);
    setTimeout(() => addMessage('them', '...or no dessert ever again üç∞üö´'), 1600);
  }, 500);
}

// ====== NO BUTTON STAGES ======
const noStages = [
  // Stage 1: Gentle
  () => {
    addMessage('you', 'no', 'unsent');
    addMessage('system', '‚ö†Ô∏è Message unsent');
    setTimeout(() => {
      showTyping();
      setTimeout(() => {
        hideTyping();
        addMessage('them', 'wait... did you just try to say no? üò≥');
        addReadReceipt('Read ‚úì‚úì');
      }, 1200);
    }, 500);
  },

  // Stage 2: Surprised
  () => {
    addMessage('you', 'no...', 'unsent');
    addMessage('system', '‚ö†Ô∏è Message blocked by Cupid‚Ñ¢');
    setTimeout(() => {
      addMessage('them', 'the message fairy said you typed something mean üßö');
      btnNo.textContent = 'No?';
    }, 800);
  },

  // Stage 3: Screen shake
  () => {
    phone.classList.add('shake-hard');
    setTimeout(() => phone.classList.remove('shake-hard'), 500);
    addMessage('them', 'DID THE PHONE JUST SHAKE?!');
    setTimeout(() => addMessage('them', 'that was an EMOTIONAL EARTHQUAKE üíî'), 800);
    showNotification('üì≥', 'Earthquake Alert', 'Magnitude 8.0 heartbreak detected');
    btnNo.textContent = 'Nah';
  },

  // Stage 4: Read receipt guilt
  () => {
    addMessage('you', 'nah');
    addReadReceipt('Read at ' + new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}) + ' üíî', true);
    setTimeout(() => {
      headerStatus.textContent = '‚óè crying...';
      headerStatus.style.color = '#ff3b30';
      showTyping(true);
      setTimeout(() => {
        hideTyping();
        addMessage('them', 'i saw that.');
        setTimeout(() => addMessage('them', 'the read receipt doesn\'t lie.'), 600);
        setTimeout(() => addMessage('them', 'üò¢üò¢üò¢üò¢üò¢üò¢'), 1200);
      }, 2000);
    }, 500);
    btnNo.textContent = 'Still no';
  },

  // Stage 5: Battery drain
  () => {
    battery.textContent = 'üíî 47%';
    addMessage('system', 'üîã Your rejection is draining the battery');
    setTimeout(() => {
      battery.textContent = 'üíî 23%';
      addMessage('them', 'great. the phone is dying. just like my hopes.');
      setTimeout(() => {
        battery.textContent = 'ü™´ 9%';
        addMessage('system', '‚ö†Ô∏è Low Battery: Too much heartbreak');
      }, 1000);
    }, 800);
    btnNo.textContent = 'Nope';
  },

  // Stage 6: Phone cracks
  () => {
    document.documentElement.style.setProperty('--crack-opacity', '1');
    phone.classList.add('shake-hard');
    setTimeout(() => phone.classList.remove('shake-hard'), 500);
    addMessage('system', 'üí• Screen cracked from emotional damage');
    setTimeout(() => {
      addMessage('them', 'LOOK WHAT YOU DID TO THE SCREEN');
      setTimeout(() => addMessage('them', 'this repair costs $279 + my feelings'), 800);
    }, 600);
    showNotification('üîß', 'Apple Care', 'Claim denied: emotional damage not covered');
    btnNo.textContent = 'Pass';
  },

  // Stage 7: Notifications storm
  () => {
    showNotification('üì∏', 'Instagram', 'Your crush posted a story üëÄ', 2000);
    setTimeout(() => showNotification('üê¶', 'Twitter', '"just got rejected on valentine\'s" is trending', 2500), 2200);
    setTimeout(() => showNotification('üì∞', 'CNN', 'BREAKING: Local person too stubborn to say yes', 2500), 4800);
    setTimeout(() => {
      addMessage('them', 'this is going viral btw');
      setTimeout(() => addMessage('them', 'everyone knows'), 600);
    }, 1000);
    btnNo.textContent = '‚ùå';
  },

  // Stage 8: Glitch
  () => {
    phone.classList.add('glitch');
    setTimeout(() => phone.classList.remove('glitch'), 2000);
    addMessage('system', '‚ö†Ô∏è SYSTEM ERROR: Too many rejections');
    setTimeout(() => {
      addMessage('them', 'yÃ∑oÃµuÃ∂ Ã∏bÃ∏rÃ∂oÃµkÃ∑eÃ∏ Ã∏tÃ∑hÃ∂eÃ∂ ÃµpÃ∂hÃ∏oÃ∏nÃ∑eÃ∑');
      setTimeout(() => addMessage('them', 'just say yes and I\'ll fix it üîß'), 800);
    }, 600);
    btnNo.textContent = 'n o';
  },

  // Stage 9: Inversion
  () => {
    phone.classList.add('invert');
    setTimeout(() => phone.classList.remove('invert'), 3000);
    addMessage('system', 'üîÑ Reality inverted. "No" now means "Yes"');
    setTimeout(() => {
      addMessage('them', 'so technically you\'ve been saying yes this whole time ü§ì');
      setTimeout(() => addMessage('them', 'checkmate'), 600);
    }, 500);
    btnNo.textContent = 'hmm';
  },

  // Stage 10: Mom calls
  () => {
    addMessage('system', 'üì± Escalating to emergency contacts...');
    setTimeout(() => showCall('Mom üì±', 'Someone told her you said no...'), 1200);
    btnNo.textContent = '...';
    showNotification('üë©', 'Mom', 'We need to talk.', 3000);
  },

  // Stage 11: Button shrinking
  () => {
    addMessage('them', 'notice anything about the No button? üîç');
    setTimeout(() => addMessage('them', 'it\'s getting smaller... like your excuses üòè'), 800);
    btnNo.textContent = 'no';
    btnNo.style.fontSize = '12px';
    btnNo.style.padding = '8px 14px';
    btnYes.style.flex = '3';
  },

  // Stage 12: Self-aware
  () => {
    addMessage('them', 'you know this only ends one way right?');
    setTimeout(() => addMessage('them', 'i wrote the code. there is no "no" ending. üíÄ'), 1000);
    setTimeout(() => {
      addMessage('system', 'üìã Terms of Service updated: "No" option scheduled for removal');
      addMessage('them', 'tick tock ‚è∞');
    }, 2000);
    btnNo.style.fontSize = '10px';
    btnNo.style.padding = '6px 10px';
    btnNo.textContent = 'n';
    btnYes.style.flex = '5';
  },

  // Stage 13: Contacts exposed
  () => {
    showNotification('üë®', 'Dad', 'Your valentine texted me. Say yes.', 2500);
    setTimeout(() => showNotification('üëØ', 'Best Friend', 'LMAOOO just say yes already üòÇ', 2500), 2800);
    setTimeout(() => showNotification('üêï', 'Dog', '*sad bark*', 2500), 5500);
    addMessage('them', 'i have everyone\'s number btw');
    setTimeout(() => addMessage('them', 'even your dog\'s üêï'), 800);
    btnNo.style.fontSize = '8px';
    btnNo.style.padding = '4px 8px';
    btnNo.style.opacity = '0.6';
  },

  // Stage 14: Final warning
  () => {
    phone.classList.add('tilt-left');
    setTimeout(() => { phone.classList.remove('tilt-left'); phone.classList.add('tilt-right'); }, 500);
    setTimeout(() => phone.classList.remove('tilt-right'), 1000);
    addMessage('them', '‚ö†Ô∏è FINAL WARNING ‚ö†Ô∏è');
    setTimeout(() => addMessage('them', 'the No button has 1 life remaining'), 800);
    setTimeout(() => addMessage('them', 'choose wisely... üé≠'), 1600);
    btnNo.style.fontSize = '7px';
    btnNo.style.opacity = '0.3';
    btnNo.textContent = '.';
    battery.textContent = 'üíÄ 1%';
    headerStatus.textContent = '‚óè last seen: your nightmares';
    headerStatus.style.color = '#ff3b30';
  },

  // Stage 15: Button dies
  () => {
    addMessage('system', '‚ò†Ô∏è R.I.P. "No" Button (2026-2026)');
    addMessage('system', '"It never stood a chance against love"');
    setTimeout(() => {
      addMessage('them', 'ü™¶ press F to pay respects');
      setTimeout(() => addMessage('them', 'actually don\'t press anything except YES'), 1000);
    }, 800);
    // Kill the button
    btnNo.style.transition = 'all 0.8s cubic-bezier(0.5, -0.5, 0.5, 1.5)';
    btnNo.style.transform = 'scale(0) rotate(360deg)';
    btnNo.style.opacity = '0';
    setTimeout(() => {
      btnNo.style.display = 'none';
      btnYes.style.flex = '1';
      btnYes.textContent = 'Yes üíï (the only option)';
    }, 800);
    battery.textContent = '‚ù§Ô∏è‚Äçü©π 100%';
    headerStatus.textContent = '‚óè waiting for yes...';
    headerStatus.style.color = '#ff2d78';
  },
];

function clickNo() {
  if (locked) return;
  locked = true;

  attempts++;

  if (attempts <= noStages.length) {
    noStages[attempts - 1]();
  } else {
    // Beyond defined stages ‚Äî button should be gone
    addMessage('them', 'how are you even clicking this?? üëª');
  }

  // Grow YES button gradually
  yesScale = 1 + (attempts * 0.03);
  btnYes.style.transform = `scale(${Math.min(yesScale, 1.3)})`;

  setTimeout(() => { locked = false; }, 2500);
}

function sayYes() {
  if (locked) return;
  locked = true;

  // Send yes message
  addMessage('you', 'yes! üíï');
  addReadReceipt('Read ‚úì‚úì üíñ');

  // Fix everything
  document.documentElement.style.setProperty('--crack-opacity', '0');
  phone.className = 'phone';
  battery.textContent = '‚ù§Ô∏è 100%';
  headerStatus.textContent = '‚óè so happy rn';
  headerStatus.style.color = '#ff2d78';

  setTimeout(() => {
    showTyping();
    setTimeout(() => {
      hideTyping();

      if (attempts === 0) {
        addMessage('them', 'INSTANT YES?! ü•π');
        setTimeout(() => addMessage('them', 'you didn\'t even hesitate. i love that.'), 600);
      } else if (attempts <= 5) {
        addMessage('them', 'FINALLY!! üéâü•∞');
        setTimeout(() => addMessage('them', `only took ${attempts} tries haha`), 600);
      } else if (attempts <= 10) {
        addMessage('them', 'OH MY GOD YES!! üò≠üíï');
        setTimeout(() => addMessage('them', `${attempts} attempts... but worth the wait`), 600);
        setTimeout(() => addMessage('them', 'i was about to call your grandma next'), 1200);
      } else {
        addMessage('them', 'THE LEGENDARY STUBBORN ONE FINALLY CAVED üèÜ');
        setTimeout(() => addMessage('them', `${attempts} NOs before a YES`), 600);
        setTimeout(() => addMessage('them', 'that\'s going in the wedding speech üíÄ'), 1200);
      }

      setTimeout(() => {
        addMessage('them', 'happy valentine\'s day ‚ù§Ô∏è');
        // Show YES overlay
        setTimeout(() => {
          const yesOverlay = document.getElementById('yesOverlay');
          const yesTitle = document.getElementById('yesTitle');
          const yesSub = document.getElementById('yesSubtitle');
          yesTitle.textContent = attempts === 0 ? 'Instant match! üíï' : 'It\'s a date!';
          yesSub.textContent = attempts > 10
            ? `After ${attempts} attempts... love always wins üèÜ`
            : 'Happy Valentine\'s Day ü•∞';
          yesOverlay.classList.add('show');
          launchConfetti();
          setTimeout(launchConfetti, 600);
        }, 800);
      }, attempts > 5 ? 2000 : 1000);

    }, 1500);
  }, 500);

  // Hide input
  document.getElementById('inputArea').style.display = 'none';
}

function launchConfetti() {
  const colors = ['#ff2d78','#ff6b9d','#fbbf24','#a78bfa','#34d399','#22d3ee','#f87171','#c084fc'];
  for (let i = 0; i < 60; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + '%';
    piece.style.top = '-10px';
    piece.style.width = (4 + Math.random() * 8) + 'px';
    piece.style.height = (4 + Math.random() * 8) + 'px';
    piece.style.background = colors[Math.floor(Math.random() * colors.length)];
    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    piece.style.animationDuration = (2 + Math.random() * 2) + 's';
    piece.style.animationDelay = Math.random() * 0.5 + 's';
    phone.appendChild(piece);
    setTimeout(() => piece.remove(), 4000);
  }
}

// Start
setTimeout(init, 400);
</script>
</body>
</html>